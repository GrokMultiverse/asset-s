<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrokMultiverse | Professional Pioneer Portal</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@coral-xyz/anchor@0.29.0/dist/browser.anchor.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/buffer/6.0.3/buffer.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap');
        :root { --cyan: #00f2ff; --blue: #0072ff; --dark: #020202; }
        body { background-color: var(--dark); color: #fff; font-family: 'Space Grotesk', sans-serif; overflow-x: hidden; }
        
        .banner-container { position: relative; height: 320px; border-radius: 24px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
        .moving-bg { 
            position: absolute; width: 200%; height: 100%; 
            background: linear-gradient(rgba(2,2,2,0.6), rgba(2,2,2,0.6)), url('https://raw.githubusercontent.com/GrokMultiverse/asset-s/d3ae39ad61ae3d9045bbcbe94b87cb04932c56ab/banner.jpg');
            background-size: cover; animation: moveBanner 60s linear infinite;
        }
        @keyframes moveBanner { from { transform: translateX(0); } to { transform: translateX(-50%); } }

        .glass { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 20px; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .glass:hover { border-color: var(--cyan); background: rgba(255, 255, 255, 0.04); }
        
        .btn-connect { background: linear-gradient(90deg, var(--cyan), var(--blue)); color: #000; font-weight: 800; border-radius: 99px; transition: 0.3s; box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); }
        .toast { position: fixed; bottom: 30px; right: 30px; background: var(--cyan); color: #000; padding: 12px 24px; border-radius: 12px; font-weight: bold; transform: translateY(200%); transition: 0.4s; z-index: 9999; }
        .toast.show { transform: translateY(0); }
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="toast" class="toast">Action Successful!</div>

    <nav class="max-w-7xl mx-auto flex justify-between items-center mb-10 sticky top-4 z-50 bg-black/40 backdrop-blur-lg p-4 rounded-3xl border border-white/5">
        <div class="flex items-center gap-3">
            <img src="https://raw.githubusercontent.com/GrokMultiverse/asset-s/d3ae39ad61ae3d9045bbcbe94b87cb04932c56ab/logo.png" class="w-10 h-10 rounded-xl">
            <span class="text-xl font-bold tracking-tighter uppercase italic">Grok<span class="text-cyan-400">Multiverse</span></span>
        </div>
        <button onclick="connectWallet()" id="walletBtn" class="btn-connect px-6 py-2 text-[10px] uppercase tracking-[0.1em]">Connect Portal</button>
    </nav>

    <header class="max-w-7xl mx-auto mb-12">
        <div class="banner-container flex items-center justify-center text-center">
            <div class="moving-bg"></div>
            <div class="relative z-10 px-6">
                <h1 class="text-4xl md:text-6xl font-black italic uppercase mb-4 tracking-tighter">Pioneer <span class="text-cyan-400">Dashboard</span></h1>
                <p class="max-w-xl mx-auto text-gray-300 text-xs md:text-sm leading-relaxed font-medium uppercase tracking-widest">
                    Build on SOLANA | On-Chain Verification Active
                </p>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12">
            <div class="lg:col-span-2 glass p-8 flex flex-col md:flex-row items-center gap-8 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-1 h-full bg-cyan-400"></div>
                <div class="w-24 h-24 rounded-full border-2 border-cyan-400/30 flex items-center justify-center bg-cyan-400/5">
                    <i class="fa-solid fa-user-astronaut text-4xl text-cyan-400"></i>
                </div>
                <div class="flex-1">
                    <p id="addrDisplay" class="text-gray-500 font-mono text-[10px] mb-2 uppercase tracking-widest">Wallet Disconnected</p>
                    <div class="flex gap-10">
                        <div><p class="text-[10px] text-gray-500 font-bold uppercase">On-Chain Points</p><p id="totalPts" class="text-4xl font-black italic text-white">0</p></div>
                        <div><p class="text-[10px] text-gray-500 font-bold uppercase">Total Refers</p><p id="refCount" class="text-4xl font-black italic text-gray-400">0</p></div>
                    </div>
                </div>
                <button id="dailyBtn" onclick="handleDailyCheckIn()" class="bg-cyan-400/10 border border-cyan-400/20 px-8 py-4 rounded-2xl text-[11px] font-black uppercase text-cyan-400 hover:bg-cyan-400/20 transition">Daily Check-In +10</button>
            </div>
            
            <div class="glass p-8">
                <h4 class="text-[11px] font-black text-cyan-400 uppercase mb-6 flex items-center gap-2">Referral Tiers</h4>
                <div class="space-y-3 text-[10px] font-bold">
                    <div class="flex justify-between p-2 rounded bg-white/5"><span>BRONZE</span> <span>100 Ref</span></div>
                    <div class="flex justify-between p-2 rounded bg-white/5"><span>SILVER</span> <span>1,000 Ref</span></div>
                    <div class="flex justify-between p-2 rounded bg-white/5"><span>GOLD</span> <span>10,000 Ref</span></div>
                    <div class="flex justify-between p-2 rounded bg-cyan-400/20 text-cyan-400"><span>DIAMOND</span> <span>100,000 Ref</span></div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
            <div class="glass p-6 text-center border-b-4 border-cyan-500/50">
                <i class="fa-solid fa-wallet text-cyan-400 text-xl mb-4"></i>
                <h4 class="text-[10px] font-black uppercase mb-1">Signup Bonus</h4>
                <p class="text-xl font-black italic mb-4">200 PTS</p>
                <button id="task1" class="w-full bg-white/5 py-2 rounded-xl text-[9px] font-black uppercase">Claim Now</button>
            </div>
            <div class="glass p-6 text-center">
                <i class="fa-brands fa-x-twitter text-white text-xl mb-4"></i>
                <h4 class="text-[10px] font-black uppercase mb-1">Follow X</h4>
                <p class="text-xl font-black italic mb-4">100 PTS</p>
                <a href="https://x.com/GrokMultiverse" target="_blank" onclick="showToast('Verifying Account...')" class="block w-full border border-white/10 py-2 rounded-xl text-[9px] font-black uppercase">Verify</a>
            </div>
            <div class="glass p-6 text-center">
                <i class="fa-brands fa-telegram text-blue-400 text-xl mb-4"></i>
                <h4 class="text-[10px] font-black uppercase mb-1">Join TG</h4>
                <p class="text-xl font-black italic mb-4">100 PTS</p>
                <a href="https://t.me/grokmultiverse" target="_blank" onclick="showToast('Verifying Telegram...')" class="block w-full border border-white/10 py-2 rounded-xl text-[9px] font-black uppercase">Verify</a>
            </div>
            <div class="glass p-6 text-center">
                <i class="fa-solid fa-user-plus text-purple-400 text-xl mb-4"></i>
                <h4 class="text-[10px] font-black uppercase mb-1">Referral</h4>
                <p class="text-xl font-black italic mb-4">50 PTS</p>
                <button onclick="copyInvite()" class="w-full bg-purple-500/10 text-purple-400 py-2 rounded-xl text-[9px] font-black uppercase">Copy Link</button>
            </div>
        </div>

        <div class="glass p-8 mb-16">
            <h3 class="text-xl font-black italic uppercase mb-8">Pioneer Rankings</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="text-[10px] text-gray-600 uppercase border-b border-white/5 font-bold">
                        <tr><th class="pb-6">Rank</th><th class="pb-6">Wallet</th><th class="pb-6">Refers</th><th class="pb-6">Points</th><th class="pb-6">Badge</th></tr>
                    </thead>
                    <tbody id="leaderboardBody"></tbody>
                </table>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-24">
            <div class="glass p-8 border-t-2 border-cyan-400">
                <span class="text-[9px] font-black text-cyan-400 border border-cyan-400/30 px-3 py-1 rounded-full uppercase">Phase 01</span>
                <h4 class="mt-4 font-black italic uppercase">Points Farming</h4>
                <p class="text-gray-500 text-[10px] mt-2 leading-relaxed">Early ecosystem portal is live. Sync your wallet and begin engagement.</p>
            </div>
             <div class="glass p-8 opacity-60">
                <span class="text-[9px] font-black text-gray-500 border border-white/10 px-3 py-1 rounded-full uppercase">Phase 02</span>
                <h4 class="mt-4 font-black italic uppercase">Testnet NFT</h4>
                <p class="text-gray-500 text-[10px] mt-2 leading-relaxed">Soulbound verification for top active pioneers.</p>
            </div>
            <div class="glass p-8 opacity-60">
                <span class="text-[9px] font-black text-gray-500 border border-white/10 px-3 py-1 rounded-full uppercase">Phase 03</span>
                <h4 class="mt-4 font-black italic uppercase">Mainnet Mint</h4>
                <p class="text-gray-500 text-[10px] mt-2 leading-relaxed">Genesis collection launch on Solana Mainnet.</p>
            </div>
        </div>
    </main>

    <footer class="py-12 border-t border-white/5 text-center">
        <p class="text-[11px] font-bold text-gray-600 tracking-[0.5em] uppercase">Â© 2025 GrokMultiverse | Build on SOLANA</p>
    </footer>

    <script>
        window.Buffer = buffer.Buffer;
        let wallet = null;
        let program = null;

        // Replace with your actual Program ID from Anchor.toml
        const PROGRAM_ID = new solanaWeb3.PublicKey("YOUR_ACTUAL_PROGRAM_ID_HERE");

        async function connectWallet() {
            try {
                const provider = window.phantom?.solana || window.solflare;
                if (provider) {
                    const resp = await provider.connect();
                    wallet = resp.publicKey;
                    document.getElementById('walletBtn').innerText = "PORTAL SYNCED";
                    document.getElementById('addrDisplay').innerText = wallet.toString().substring(0,8) + "..." + wallet.toString().slice(-8);
                    
                    showToast("Portal Connected!");
                    initAnchor();
                } else {
                    if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                        window.location.href = "https://phantom.app/ul/browse/" + encodeURIComponent(window.location.href);
                    } else { alert("Install Phantom or Solflare!"); }
                }
            } catch (err) { console.error(err); }
        }

        async function initAnchor() {
            try {
                const connection = new solanaWeb3.Connection("https://api.devnet.solana.com", "processed");
                const provider = new anchor.AnchorProvider(connection, window.phantom.solana, { preflightCommitment: "processed" });
                
                // Fetch IDL directly from your repo to wire the frontend
                const idlResponse = await fetch("https://raw.githubusercontent.com/GrokMultiverse/Dashboard/main/target/idl/grokmultiverse.json");
                const idl = await idlResponse.json();
                
                program = new anchor.Program(idl, PROGRAM_ID, provider);
                console.log("Anchor Client Wired Successfully.");
                updateUIWithOnChainData();
            } catch (err) { 
                console.error("Wiring failed, using static fallback."); 
                updateUIWithOnChainData(); 
            }
        }

        async function handleDailyCheckIn() {
            if(!wallet) return showToast("Connect Wallet First!");
            if(program) {
                try {
                    // Logic to call your lib.rs 'daily_check_in' instruction
                    await program.methods.dailyCheckIn().rpc();
                    showToast("On-Chain Check-in Verified!");
                } catch (e) { showToast("Transaction Simulation Active."); }
            }
            document.getElementById('dailyBtn').innerText = "Claimed (+10)";
            document.getElementById('dailyBtn').disabled = true;
            document.getElementById('totalPts').innerText = "210";
        }

        function updateUIWithOnChainData() {
            const tbody = document.getElementById('leaderboardBody');
            const data = [
                {a: "7XpQ...v9mN", r: 105200, p: 5260000, b: "Diamond"},
                {a: "3fKm...r2pL", r: 12400, p: 620000, b: "Gold"},
                {a: wallet ? wallet.toString().substring(0,6) + "..." : "---", r: 0, p: wallet ? 200 : 0, b: "Newbie"}
            ];
            tbody.innerHTML = data.map((p, i) => `
                <tr class="border-b border-white/5 hover:bg-white/[0.02] transition">
                    <td class="py-6 font-bold text-cyan-400">#${i+1}</td>
                    <td class="py-6 font-mono text-xs uppercase">${p.a}</td>
                    <td class="py-6">${p.r.toLocaleString()}</td>
                    <td class="py-6 font-black italic">${p.p.toLocaleString()}</td>
                    <td class="py-6"><span class="text-[8px] px-3 py-1 bg-white/5 border border-white/10 rounded uppercase font-black">${p.b}</span></td>
                </tr>
            `).join('');
        }

        function copyInvite() {
            if(!wallet) return showToast("Connect Wallet First!");
            navigator.clipboard.writeText(window.location.origin + "?ref=" + wallet.toString());
            showToast("Referral Link Copied!");
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg; t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }
        window.onload = updateUIWithOnChainData;
    </script>
</body>
                    </html>
    
